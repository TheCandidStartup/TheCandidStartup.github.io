import{r as x,R as V,j as L}from"./vendor-Bnznptw5.js";function J(r,e,s,n){if(r==0)return[0,0,[]];var[t,o]=e.offsetToItem(n);t=Math.max(0,Math.min(r-1,t));var i=n+s;const I=1,l=1;for(let c=0;c<I&&t>0;c++)t--,o-=e.itemSize(t);const z=t;var h=o;const u=[];for(;h<i&&t<r;){const c=e.itemSize(t);u.push(c),h+=c,t++}for(let c=0;c<l&&t<r;c++){const T=e.itemSize(t);u.push(T),t++}return[z,o,u]}const le=6e6,ce=100;function Q(r,e=le,s=ce){let n=0,t=0,o=0;r<e?(n=t=r,o=1):(n=e,t=n/s,o=Math.floor(r/t));function i(c){return c<=0?0:c>=o-1?r-n:Math.round((c-1)*(r-n)/(o-3))}const I={scrollOffset:0,renderOffset:0,page:0,scrollDirection:"forward"},[l,z]=x.useState(I);function h(c,T,f){if(l.scrollOffset==f)return[f,l];let m=Math.max(0,Math.min(f,T-c));const S=l.scrollOffset<=m?"forward":"backward";let a,w,R=f;if(Math.abs(m-l.scrollOffset)<c)a=Math.min(o-1,Math.floor((f+l.renderOffset)/t)),w=i(a),a!=l.page&&(m=f+l.renderOffset-w,R=m);else{if(m<t)a=0;else if(m>=n-t)a=o-1;else{const j=(r-t*2)/(n-t*2);a=Math.min(o-3,Math.floor((m-t)*j/t))+1}w=i(a)}const d={scrollOffset:m,renderOffset:w,page:a,scrollDirection:S};return z(d),[R,d]}function u(c,T){const f=Math.min(r-T,Math.max(c,0)),m=l.scrollOffset+l.renderOffset<=f?"forward":"backward",S=Math.min(o-1,Math.floor(f/t)),a=i(S),w=f-a;return z({scrollOffset:w,renderOffset:a,page:S,scrollDirection:m}),w}return{...l,renderSize:n,onScroll:h,doScrollTo:u}}function A(r){return r.addEventListener!==void 0}function se(r,e,s=window,n={}){const t=x.useRef(),{capture:o,passive:i,once:I}=n;x.useEffect(()=>{t.current=e},[e]),x.useEffect(()=>{if(!s)return;const l=A(s)?s:s.current;if(!l)return;const z=u=>t.current(u),h={capture:o,passive:i,once:I};return l.addEventListener(r,z,h),()=>{l.removeEventListener(r,z,h)}},[r,s,o,i,I])}if(import.meta.vitest){const{it:r,expect:e}=import.meta.vitest;r("isListener",()=>{e(A(window)).toBe(!0),e(A(document)).toBe(!0),e(A(document.createElement("div"))).toBe(!0),e(A(x.createRef())).toBe(!1)})}function fe(r,e,s){const n=x.useRef(),t=x.useRef(r);x.useEffect(()=>{t.current=r},[r]);const o=performance.now();x.useEffect(()=>{function i(){n.current=void 0,e!==null&&(performance.now()-o>=e?t.current():n.current=requestAnimationFrame(i))}return i(),()=>{typeof n.current=="number"&&(cancelAnimationFrame(n.current),n.current=void 0)}},[e,s])}const ue=150,ae=500;function oe(r=window){const[e,s]=x.useState(0),n="onscrollend"in window,t=n?ae:ue;return se("scroll",()=>s(o=>o+1),r),se("scrollend",()=>s(0),n?r:null),fe(()=>s(0),e==0?null:t,e),e>0}const de=(r,e,s)=>`${r}:${e}`,Oe=V.forwardRef(function(e,s){const{width:n,height:t,rowCount:o,rowOffsetMapping:i,columnCount:I,columnOffsetMapping:l,children:z,itemData:h=void 0,itemKey:u=de,onScroll:c,useIsScrolling:T=!1}=e,f=i.itemOffset(o),m=l.itemOffset(I),S=V.useRef(null),{scrollOffset:a,renderOffset:w,renderSize:R,onScroll:H,doScrollTo:d}=Q(f,e.maxCssSize,e.minNumPages),{scrollOffset:j,renderOffset:B,renderSize:K,onScroll:$,doScrollTo:F}=Q(m,e.maxCssSize,e.minNumPages),N=oe(S);V.useImperativeHandle(s,()=>({scrollTo(M,C){const v=S.current;v&&v.scrollTo(F(C,v.clientWidth),d(M,v.clientHeight))},scrollToItem(M,C){this.scrollTo(i.itemOffset(M),l.itemOffset(C))}}),[i,l,d,F]);function D(M){const{clientWidth:C,clientHeight:v,scrollWidth:q,scrollHeight:ie,scrollLeft:ee,scrollTop:te}=M.currentTarget,[re,X]=H(v,ie,te),[ne,Z]=$(C,q,ee);S.current&&(re!=te||ne!=ee)&&S.current.scrollTo(ne,re),c==null||c(X.scrollOffset+X.renderOffset,Z.scrollOffset+Z.renderOffset,X,Z)}const[P,O,g]=J(o,i,t,a+w),[_,b,y]=J(I,l,n,j+B),E=z;let p=O-w,W=0,Y=0,G=0,U=0,k=0;return L.jsx("div",{onScroll:D,ref:S,style:{position:"relative",height:t,width:n,overflow:"auto",willChange:"transform"},children:L.jsx("div",{style:{height:R,width:K},children:g.map((M,C)=>(Y=p,p+=M,W=P+C,G=b-B,L.jsx(x.Fragment,{children:y.map((v,q)=>(k=G,G+=v,U=_+q,L.jsx(E,{data:h,rowIndex:W,columnIndex:U,isScrolling:T?N:void 0,style:{position:"absolute",top:Y,height:M,left:k,width:v}},u(W,U,h))))},u(W,0,h))))})})}),me=(r,e)=>r,ge=V.forwardRef(function(e,s){const{width:n,height:t,itemCount:o,itemOffsetMapping:i,children:I,itemData:l=void 0,itemKey:z=me,layout:h="vertical",onScroll:u,useIsScrolling:c=!1}=e,T=i.itemOffset(o),f=V.useRef(null),{scrollOffset:m,renderOffset:S,renderSize:a,onScroll:w,doScrollTo:R}=Q(T,e.maxCssSize,e.minNumPages),H=oe(f),d=h==="vertical";V.useImperativeHandle(s,()=>({scrollTo(O){const g=f.current;g&&(d?g.scrollTo(0,R(O,g.clientHeight)):g.scrollTo(R(O,g.clientWidth),0))},scrollToItem(O){this.scrollTo(i.itemOffset(O))}}),[i,d,R]);function j(O){if(d){const{clientHeight:g,scrollHeight:_,scrollTop:b,scrollLeft:y}=O.currentTarget,[E,p]=w(g,_,b);E!=b&&f.current&&f.current.scrollTo(y,E),u==null||u(p.scrollOffset+p.renderOffset,p)}else{const{clientWidth:g,scrollWidth:_,scrollTop:b,scrollLeft:y}=O.currentTarget,[E,p]=w(g,_,y);E!=y&&f.current&&f.current.scrollTo(E,b),u==null||u(p.scrollOffset+p.renderOffset,p)}}const[B,K,$]=J(o,i,d?t:n,m+S),F=I;let N=K-S,D,P;return L.jsx("div",{onScroll:j,ref:f,style:{position:"relative",height:t,width:n,overflow:"auto",willChange:"transform"},children:L.jsx("div",{style:{height:d?a:"100%",width:d?"100%":a},children:$.map((O,g)=>(P=N,N+=O,D=B+g,L.jsx(F,{data:l,index:D,isScrolling:c?H:void 0,style:{position:"absolute",top:d?P:void 0,left:d?void 0:P,height:d?O:"100%",width:d?"100%":O}},z(D,l))))})})});class he{constructor(e){Object.defineProperty(this,"fixedItemSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.fixedItemSize=e}itemSize(e){return this.fixedItemSize}itemOffset(e){return e*this.fixedItemSize}offsetToItem(e){const s=Math.floor(e/this.fixedItemSize),n=s*this.fixedItemSize;return[s,n]}}function Ie(r){return new he(r)}class Se{constructor(e,s){Object.defineProperty(this,"defaultItemSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sizes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultItemSize=e,this.sizes=s}itemSize(e){return e<this.sizes.length?this.sizes[e]:this.defaultItemSize}itemOffset(e){var s=0;let n=this.sizes.length;e>n?s=(e-n)*this.defaultItemSize:n=e;for(let t=0;t<n;t++)s+=this.sizes[t];return s}offsetToItem(e){var s=0;const n=this.sizes.length;for(let o=0;o<n;o++){const i=this.sizes[o];if(s+i>e)return[o,s];s+=i}const t=Math.floor((e-s)/this.defaultItemSize);return s+=t*this.defaultItemSize,[t+n,s]}}function ze(r,e){return new Se(r,e||[])}export{ge as V,Ie as a,Oe as b,ze as u};
//# sourceMappingURL=index-CR8oqy0F.js.map
