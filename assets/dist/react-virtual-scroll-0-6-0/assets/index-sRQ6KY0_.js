import{R as T,r as v,j as R}from"./vendor-BFDfz19Z.js";const ne=({...t},e)=>R.jsx("div",{ref:e,...t}),D=T.forwardRef(function({render:e=ne,...i},n){return e(i,n)});function ee(t){const{children:e,className:i,style:n}=t,[r,s]=T.useState(0),[o,u]=T.useState(0),c=T.useRef(null),m=T.useCallback(w=>{w.forEach(l=>{const C=Math.round(l.contentBoxSize[0].inlineSize);s(C);const f=Math.round(l.borderBoxSize[0].blockSize);u(f)})},[]);T.useLayoutEffect(()=>{const w=c.current;if(w&&(u(w.clientHeight),s(w.clientWidth),typeof ResizeObserver<"u")){const l=new ResizeObserver(m);return l.observe(w),()=>{l.disconnect()}}},[m]);const S=o>0&&r>0;return R.jsx("div",{ref:c,className:i,style:n,children:R.jsx("div",{style:{overflow:"visible",width:0,height:0},children:S&&e({height:o,width:r})})})}const re=6e6,ie=100;function q(t,e=re,i=ie){let n=0,r=0,s=0;t<e?(n=r=t,s=1):(n=e,r=n/i,s=Math.floor(t/r));function o(l){return l<=0?0:l>=s-1?t-n:Math.round((l-1)*(t-n)/(s-3))}const u={scrollOffset:0,renderOffset:0,page:0,scrollDirection:"forward"},[c,m]=v.useState(u);function S(l,C,f){if(c.scrollOffset==f)return[f,c];let h=Math.max(0,Math.min(f,C-l));const x=c.scrollOffset<=h?"forward":"backward";let a,g,O=f;if(Math.abs(h-c.scrollOffset)<l)a=Math.min(s-1,Math.floor((f+c.renderOffset)/r)),g=o(a),a!=c.page&&(h=f+c.renderOffset-g,O=h);else{if(h<r)a=0;else if(h>=n-r)a=s-1;else{const z=(t-r*2)/(n-r*2);a=Math.min(s-3,Math.floor((h-r)*z/r))+1}g=o(a)}const p={scrollOffset:h,renderOffset:g,page:a,scrollDirection:x};return m(p),[O,p]}function w(l,C){const f=Math.min(t-C,Math.max(l,0)),h=c.scrollOffset+c.renderOffset<=f?"forward":"backward",x=Math.min(s-1,Math.floor(f/r)),a=o(x),g=f-a;return m({scrollOffset:g,renderOffset:a,page:x,scrollDirection:h}),g}return{...c,renderSize:n,onScroll:S,doScrollTo:w}}function E(t){return t.addEventListener!==void 0}function X(t,e,i=window,n={}){const r=v.useRef(),{capture:s,passive:o,once:u}=n;v.useEffect(()=>{r.current=e},[e]),v.useEffect(()=>{if(!i)return;const c=E(i)?i:i.current;if(!c)return;const m=w=>{var l;return(l=r.current)==null?void 0:l.call(r,w)},S={capture:s,passive:o,once:u};return c.addEventListener(t,m,S),()=>{c.removeEventListener(t,m,S)}},[t,i,s,o,u])}if(import.meta.vitest){const{it:t,expect:e}=import.meta.vitest;t("isListener",()=>{e(E(window)).toBe(!0),e(E(document)).toBe(!0),e(E(document.createElement("div"))).toBe(!0),e(E(v.createRef())).toBe(!1)})}function se(t,e,i){const n=v.useRef(),r=v.useRef(t);v.useEffect(()=>{r.current=t},[t]);const s=performance.now();v.useEffect(()=>{function o(){n.current=void 0,e!==null&&(performance.now()-s>=e?r.current():n.current=requestAnimationFrame(o))}return o(),()=>{typeof n.current=="number"&&(cancelAnimationFrame(n.current),n.current=void 0)}},[s,e,i])}const oe=150,le=500;function ce(t=window){const[e,i]=v.useState(0),n="onscrollend"in window,r=n?le:oe;return X("scroll",()=>i(s=>s+1),t),X("scrollend",()=>i(0),n?t:null),se(()=>i(0),e==0?null:r,e),e>0}function Z(t,e,i,n,r){if(t===void 0)return;if(r!="visible"||t<n)return t;e=e||0;const s=t+e,o=n+i;if(!(s<=o))return e>i?t:t-i+e}const te=T.forwardRef(function(e,i){const{width:n,height:r,scrollWidth:s=0,scrollHeight:o=0,className:u,innerClassName:c,children:m,onScroll:S,useIsScrolling:w=!1,innerRender:l,outerRender:C}=e,f=T.useRef(null),{scrollOffset:h,renderOffset:x,renderSize:a,onScroll:g,doScrollTo:O}=q(o,e.maxCssSize,e.minNumPages),d=h+x,{scrollOffset:p,renderOffset:z,renderSize:y,onScroll:N,doScrollTo:L}=q(s,e.maxCssSize,e.minNumPages),H=p+z,P=ce(f);T.useImperativeHandle(i,()=>({scrollTo(j,b){if(j===void 0&&b===void 0)return;const M=f.current;if(M){const I={};j!=null&&(I.top=O(j,M.clientHeight)),b!=null&&(I.left=L(b,M.clientWidth)),M.scrollTo(I)}},scrollToArea(j,b,M,I,A){const V=f.current;if(!V)return;const W=Z(j,b,V.clientHeight,d,A),_=Z(M,I,V.clientWidth,H,A);this.scrollTo(W,_)},get clientWidth(){return f.current?f.current.clientWidth:0},get clientHeight(){return f.current?f.current.clientHeight:0}}),[O,L,d,H]);function B(j){const{clientWidth:b,clientHeight:M,scrollWidth:I,scrollHeight:A,scrollLeft:V,scrollTop:W}=j.currentTarget,[_,$]=g(M,A,W),[U,k]=N(b,I,V);f.current&&(_!=W||U!=V)&&f.current.scrollTo(U,_),S==null||S($.scrollOffset+$.renderOffset,k.scrollOffset+k.renderOffset,$,k)}const K=w?P:void 0;return R.jsxs(D,{className:u,render:C,onScroll:B,ref:f,style:{position:"relative",height:r,width:n,overflow:"auto",willChange:"transform"},children:[R.jsx(D,{className:c,render:l,style:{zIndex:1,position:"sticky",top:0,left:0,width:"100%",height:"100%"},children:m({isScrolling:K})}),R.jsx("div",{style:{position:"absolute",top:0,left:0,height:o?a:"100%",width:s?y:"100%"}})]})});function F(t,e,i,n){if(t==0)return[0,0,0,[]];if(n<0&&(i+=n,n=0),i<=0)return[0,0,0,[]];const[r,s]=e.offsetToItem(n);if(r>=t)return[0,0,0,[]];let o=Math.max(0,Math.min(t-1,r));const u=n+i,c=o;let m=s;const S=[];let w=0;for(;m<u&&o<t;){const l=e.itemSize(o);S.push(l),w+=l,m+=l,o++}return[c,s,w,S]}function J(t,e){return t==1?`${e}px`:`repeat(${t},${e}px)`}function Q(t,e){return t?t+" "+e:e}function G(t){const e=t.length;if(e==0)return;let i,n=t[0],r=1;for(let o=1;o<e;o++){const u=t[o];if(u==n)r++;else{const c=J(r,n);i=Q(i,c),n=u,r=1}}const s=J(r,n);return Q(i,s)}const fe=(t,e)=>t,ue={boxSizing:"border-box"};function ae(t){const{width:e,height:i,itemCount:n,itemOffsetMapping:r,className:s,innerClassName:o,offset:u,children:c,itemData:m,itemKey:S=fe,layout:w="vertical",outerRender:l,innerRender:C,isScrolling:f}=t,h=w==="vertical",[x,a,g,O]=F(n,r,h?i:e,u),d=G(O),p=a-u,z=c;return R.jsx(D,{className:s,render:l,style:{position:"relative",height:i,width:e,overflow:"hidden",willChange:"transform"},children:R.jsx(D,{className:o,render:C,style:{position:"absolute",display:"grid",gridTemplateColumns:h?void 0:d,gridTemplateRows:h?d:void 0,top:h?p:0,left:h?0:p,height:h?g:"100%",width:h?"100%":g},children:O.map((y,N)=>R.jsx(z,{data:m,isScrolling:f,index:x+N,style:ue},S(x+N,m)))})})}const de=(t,e,i)=>`${t}:${e}`,he={boxSizing:"border-box"};function me(t){const{width:e,height:i,rowCount:n,rowOffsetMapping:r,columnCount:s,columnOffsetMapping:o,className:u,innerClassName:c,rowOffset:m,columnOffset:S,children:w,itemData:l,itemKey:C=de,outerRender:f,innerRender:h,isScrolling:x}=t,[a,g,O,d]=F(n,r,i,m),p=G(d),[z,y,N,L]=F(s,o,e,S),H=G(L),P=g-m,B=y-S,K=w;return R.jsx(D,{className:u,render:f,style:{position:"relative",height:i,width:e,overflow:"hidden",willChange:"transform"},children:R.jsx(D,{className:c,render:h,style:{position:"absolute",display:"grid",gridTemplateColumns:H,gridTemplateRows:p,top:P,left:B,height:O,width:N},children:d.map((j,b)=>R.jsx(v.Fragment,{children:L.map((M,I)=>R.jsx(K,{data:l,isScrolling:x,rowIndex:a+b,columnIndex:z+I,style:he},C(a+b,z+I,l)))},C(a+b,0,l)))})})}function Y(t,e){return t===void 0?[void 0,void 0]:[e.itemOffset(t),e.itemSize(t)]}function Se(t,e,i,n,r,s){const o=t.current;if(!o)return;const[u,c]=Y(n,e),[m,S]=Y(r,i);o.scrollToArea(u,c,m,S,s)}const ze=T.forwardRef(function(e,i){const{rowCount:n,rowOffsetMapping:r,columnCount:s,columnOffsetMapping:o,children:u,innerClassName:c,innerRender:m,itemData:S,itemKey:w,onScroll:l,...C}=e,f=r.itemOffset(n),h=o.itemOffset(s),[x,a]=T.useState([0,0]),g=T.useRef(null);T.useImperativeHandle(i,()=>({scrollTo(d,p){const z=g.current;z&&z.scrollTo(d,p)},scrollToItem(d,p,z){Se(g,r,o,d,p,z)},get clientWidth(){return g.current?g.current.clientWidth:0},get clientHeight(){return g.current?g.current.clientHeight:0}}),[r,o]);const O=u;return R.jsx(te,{ref:g,...C,scrollHeight:f,scrollWidth:h,onScroll:(d,p,z,y)=>{a([d,p]),l&&l(d,p,z,y)},children:({isScrolling:d})=>R.jsx(ee,{style:{height:"100%",width:"100%"},children:({height:p,width:z})=>R.jsx(me,{innerClassName:c,innerRender:m,rowOffset:x[0],columnOffset:x[1],height:p,rowCount:n,columnCount:s,itemData:S,itemKey:w,isScrolling:d,rowOffsetMapping:r,columnOffsetMapping:o,width:z,children:O})})})});function ge(t,e,i,n,r){const s=t.current;if(!s)return;const o=e.itemOffset(n),u=e.itemSize(n);i?s.scrollToArea(o,u,void 0,void 0,r):s.scrollToArea(void 0,void 0,o,u,r)}const Re=T.forwardRef(function(e,i){const{itemCount:n,itemOffsetMapping:r,children:s,layout:o="vertical",onScroll:u,innerClassName:c,innerRender:m,itemData:S,itemKey:w,...l}=e,C=r.itemOffset(n),[f,h]=T.useState(0),x=T.useRef(null),a=o==="vertical";T.useImperativeHandle(i,()=>({scrollTo(O){const d=x.current;d&&(a?d.scrollTo(O,void 0):d.scrollTo(void 0,O))},scrollToItem(O,d){ge(x,r,a,O,d)}}),[r,a]);const g=s;return R.jsx(te,{ref:x,...l,scrollHeight:a?C:void 0,scrollWidth:a?void 0:C,onScroll:(O,d,p,z)=>{const y=a?O:d;h(y),u&&u(y,a?p:z)},children:({isScrolling:O})=>R.jsx(ee,{style:{height:"100%",width:"100%"},children:({height:d,width:p})=>R.jsx(ae,{innerClassName:c,innerRender:m,layout:o,offset:f,height:d,itemCount:n,itemData:S,itemKey:w,isScrolling:O,itemOffsetMapping:r,width:p,children:g})})})});class we{constructor(e){Object.defineProperty(this,"fixedItemSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.fixedItemSize=e}itemSize(e){return this.fixedItemSize}itemOffset(e){return e*this.fixedItemSize}offsetToItem(e){const i=Math.floor(e/this.fixedItemSize),n=i*this.fixedItemSize;return[i,n]}}function xe(t){return new we(t)}class pe{constructor(e,i){Object.defineProperty(this,"defaultItemSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sizes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultItemSize=e,this.sizes=i}itemSize(e){return e<this.sizes.length?this.sizes[e]:this.defaultItemSize}itemOffset(e){let i=0,n=this.sizes.length;e>n?i=(e-n)*this.defaultItemSize:n=e;for(let r=0;r<n;r++)i+=this.sizes[r];return i}offsetToItem(e){let i=0;const n=this.sizes.length;for(let s=0;s<n;s++){const o=this.sizes[s];if(i+o>e)return[s,i];i+=o}const r=Math.floor((e-i)/this.defaultItemSize);return i+=r*this.defaultItemSize,[r+n,i]}}function Ce(t,e){return new pe(t,e||[])}export{Re as V,xe as a,ze as b,Ce as u};
//# sourceMappingURL=index-sRQ6KY0_.js.map
