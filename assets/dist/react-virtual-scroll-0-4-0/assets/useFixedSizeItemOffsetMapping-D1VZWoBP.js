var de=Object.defineProperty;var me=(t,e,o)=>e in t?de(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var ce=(t,e,o)=>(me(t,typeof e!="symbol"?e+"":e,o),o);import{r as T,R as _,j as N}from"./vendor-Bnznptw5.js";function ee(t,e,o,n){if(t==0)return[0,0,[]];var[r,s]=e.offsetToItem(n);r=Math.max(0,Math.min(t-1,r));var c=n+o;const x=1,l=1;for(let i=0;i<x&&r>0;i++)r--,s-=e.itemSize(r);const I=r;var g=s;const v=[];for(;g<c&&r<t;){const i=e.itemSize(r);v.push(i),g+=i,r++}for(let i=0;i<l&&r<t;i++){const u=e.itemSize(r);v.push(u),r++}return[I,s,v]}const Se=6e6,he=100;function te(t,e=Se,o=he){let n=0,r=0,s=0;t<e?(n=r=t,s=1):(n=e,r=n/o,s=Math.floor(t/r));function c(i){return i<=0?0:i>=s-1?t-n:Math.round((i-1)*(t-n)/(s-3))}const x={scrollOffset:0,renderOffset:0,page:0,scrollDirection:"forward"},[l,I]=T.useState(x);function g(i,u,f){if(l.scrollOffset==f)return[f,l];let m=Math.max(0,Math.min(f,u-i));const S=l.scrollOffset<=m?"forward":"backward";let d,a,z=f;if(Math.abs(m-l.scrollOffset)<i)d=Math.min(s-1,Math.floor((f+l.renderOffset)/r)),a=c(d),d!=l.page&&(m=f+l.renderOffset-a,z=m);else{if(m<r)d=0;else if(m>=n-r)d=s-1;else{const j=(t-r*2)/(n-r*2);d=Math.min(s-3,Math.floor((m-r)*j/r))+1}a=c(d)}const C={scrollOffset:m,renderOffset:a,page:d,scrollDirection:S};return I(C),[z,C]}function v(i,u){const f=Math.min(t-u,Math.max(i,0)),m=l.scrollOffset+l.renderOffset<=f?"forward":"backward",S=Math.min(s-1,Math.floor(f/r)),d=c(S),a=f-d;return I({scrollOffset:a,renderOffset:d,page:S,scrollDirection:m}),a}return{...l,renderSize:n,onScroll:g,doScrollTo:v}}function F(t){return t.addEventListener!==void 0}function fe(t,e,o=window,n={}){const r=T.useRef(),{capture:s,passive:c,once:x}=n;T.useEffect(()=>{r.current=e},[e]),T.useEffect(()=>{if(!o)return;const l=F(o)?o:o.current;if(!l)return;const I=v=>r.current(v),g={capture:s,passive:c,once:x};return l.addEventListener(t,I,g),()=>{l.removeEventListener(t,I,g)}},[t,o,s,c,x])}if(import.meta.vitest){const{it:t,expect:e}=import.meta.vitest;t("isListener",()=>{e(F(window)).toBe(!0),e(F(document)).toBe(!0),e(F(document.createElement("div"))).toBe(!0),e(F(T.createRef())).toBe(!1)})}function we(t,e,o){const n=T.useRef(),r=T.useRef(t);T.useEffect(()=>{r.current=t},[t]);const s=performance.now();T.useEffect(()=>{function c(){n.current=void 0,e!==null&&(performance.now()-s>=e?r.current():n.current=requestAnimationFrame(c))}return c(),()=>{typeof n.current=="number"&&(cancelAnimationFrame(n.current),n.current=void 0)}},[e,o])}const Oe=150,ge=500;function ae(t=window){const[e,o]=T.useState(0),n="onscrollend"in window,r=n?ge:Oe;return fe("scroll",()=>o(s=>s+1),t),fe("scrollend",()=>o(0),n?t:null),we(()=>o(0),e==0?null:r,e),e>0}const xe=(t,e,o)=>`${t}:${e}`,pe=_.forwardRef(function(e,o){const{width:n,height:r,rowCount:s,rowOffsetMapping:c,columnCount:x,columnOffsetMapping:l,children:I,className:g,innerClassName:v,itemData:i=void 0,itemKey:u=xe,onScroll:f,useIsScrolling:m=!1}=e,S=c.itemOffset(s),d=l.itemOffset(x),a=_.useRef(null),{scrollOffset:z,renderOffset:V,renderSize:C,onScroll:j,doScrollTo:h}=te(S,e.maxCssSize,e.minNumPages),{scrollOffset:G,renderOffset:P,renderSize:U,onScroll:q,doScrollTo:W}=te(d,e.maxCssSize,e.minNumPages),b=ae(a);_.useImperativeHandle(o,()=>({scrollTo(M,L){const p=a.current;p&&p.scrollTo(W(L,p.clientWidth),h(M,p.clientHeight))},scrollToItem(M,L){this.scrollTo(c.itemOffset(M),l.itemOffset(L))}}),[c,l,h,W]);function X(M){const{clientWidth:L,clientHeight:p,scrollWidth:Q,scrollHeight:ue,scrollLeft:oe,scrollTop:se}=M.currentTarget,[le,Y]=j(p,ue,se),[ie,k]=q(L,Q,oe);a.current&&(le!=se||ie!=oe)&&a.current.scrollTo(ie,le),f==null||f(Y.scrollOffset+Y.renderOffset,k.scrollOffset+k.renderOffset,Y,k)}const[K,A,H]=ee(s,c,r,z+V),[w,O,B]=ee(x,l,n,G+P),y=I,D=e.outerComponent||"div",E=e.innerComponent||"div";let R=A-V,$=0,re=0,Z=0,J=0,ne=0;return N.jsx(D,{className:g,onScroll:X,ref:a,style:{position:"relative",height:r,width:n,overflow:"auto",willChange:"transform"},children:N.jsx(E,{className:v,style:{height:C,width:U},children:H.map((M,L)=>(re=R,R+=M,$=K+L,Z=O-P,N.jsx(T.Fragment,{children:B.map((p,Q)=>(ne=Z,Z+=p,J=w+Q,N.jsx(y,{data:i,rowIndex:$,columnIndex:J,isScrolling:m?b:void 0,style:{position:"absolute",top:re,height:M,left:ne,width:p}},u($,J,i))))},u($,0,i))))})})}),Ie=(t,e)=>t,Ce=_.forwardRef(function(e,o){const{width:n,height:r,itemCount:s,itemOffsetMapping:c,children:x,className:l,innerClassName:I,itemData:g=void 0,itemKey:v=Ie,layout:i="vertical",onScroll:u,useIsScrolling:f=!1}=e,m=c.itemOffset(s),S=_.useRef(null),{scrollOffset:d,renderOffset:a,renderSize:z,onScroll:V,doScrollTo:C}=te(m,e.maxCssSize,e.minNumPages),j=ae(S),h=i==="vertical";_.useImperativeHandle(o,()=>({scrollTo(w){const O=S.current;O&&(h?O.scrollTo(0,C(w,O.clientHeight)):O.scrollTo(C(w,O.clientWidth),0))},scrollToItem(w){this.scrollTo(c.itemOffset(w))}}),[c,h,C]);function G(w){if(h){const{clientHeight:O,scrollHeight:B,scrollTop:y,scrollLeft:D}=w.currentTarget,[E,R]=V(O,B,y);E!=y&&S.current&&S.current.scrollTo(D,E),u==null||u(R.scrollOffset+R.renderOffset,R)}else{const{clientWidth:O,scrollWidth:B,scrollTop:y,scrollLeft:D}=w.currentTarget,[E,R]=V(O,B,D);E!=D&&S.current&&S.current.scrollTo(E,y),u==null||u(R.scrollOffset+R.renderOffset,R)}}const[P,U,q]=ee(s,c,h?r:n,d+a),W=x,b=e.outerComponent||"div",X=e.innerComponent||"div";let K=U-a,A,H;return N.jsx(b,{className:l,onScroll:G,ref:S,style:{position:"relative",height:r,width:n,overflow:"auto",willChange:"transform"},children:N.jsx(X,{className:I,style:{height:h?z:"100%",width:h?"100%":z},children:q.map((w,O)=>(H=K,K+=w,A=P+O,N.jsx(W,{data:g,index:A,isScrolling:f?j:void 0,style:{position:"absolute",top:h?H:void 0,left:h?void 0:H,height:h?w:"100%",width:h?"100%":w}},v(A,g))))})})});class ve{constructor(e){ce(this,"fixedItemSize");this.fixedItemSize=e}itemSize(e){return this.fixedItemSize}itemOffset(e){return e*this.fixedItemSize}offsetToItem(e){const o=Math.floor(e/this.fixedItemSize),n=o*this.fixedItemSize;return[o,n]}}function Me(t){return new ve(t)}export{Ce as V,pe as a,Me as u};
//# sourceMappingURL=useFixedSizeItemOffsetMapping-D1VZWoBP.js.map
