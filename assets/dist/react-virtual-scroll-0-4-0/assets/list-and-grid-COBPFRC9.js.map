{"version":3,"file":"list-and-grid-COBPFRC9.js","sources":["../../../../packages/react-virtual-scroll/src/useVariableSizeItemOffsetMapping.ts","../../samples/list-and-grid/App.tsx","../../samples/list-and-grid/main.tsx"],"sourcesContent":["import { ItemOffsetMapping } from './VirtualBase';\n\nclass VariableSizeItemOffsetMapping implements ItemOffsetMapping {\n  constructor (defaultItemSize: number, sizes: number[]) {\n    this.defaultItemSize = defaultItemSize;\n    this.sizes = sizes;\n  }\n\n  itemSize(itemIndex: number): number {\n    return (itemIndex < this.sizes.length) ? this.sizes[itemIndex] : this.defaultItemSize;\n  }\n\n  itemOffset(itemIndex: number): number {\n    var offset = 0;\n    let length = this.sizes.length;\n    if (itemIndex > length) {\n      const numDefaultSize = itemIndex - length;\n      offset = numDefaultSize * this.defaultItemSize;\n    } else {\n      length = itemIndex;\n    }\n    \n    for (let i = 0; i < length; i ++)\n    {\n      offset += this.sizes[i];\n    }\n\n    return offset;\n  }\n\n  offsetToItem(offset: number): [itemIndex: number, startOffset: number] {\n    var startOffset = 0;\n    const length = this.sizes.length;\n    for (let i = 0; i < length; i ++) {\n      const size = this.sizes[i];\n      if (startOffset + size > offset) {\n        return [i, startOffset];\n      }\n      startOffset += size;\n    }\n\n    const itemIndex = Math.floor((offset - startOffset) / this.defaultItemSize);\n    startOffset += itemIndex * this.defaultItemSize;\n\n    return [itemIndex+length, startOffset];\n  }\n\n  defaultItemSize: number;\n  sizes: number[];\n};\n\nexport function useVariableSizeItemOffsetMapping(defaultItemSize: number, sizes?: number[]) {\n  return new VariableSizeItemOffsetMapping(defaultItemSize, sizes || []);\n};\n\nexport default useVariableSizeItemOffsetMapping;","import React from \"react\";\nimport { VirtualGrid, VirtualList, VirtualListProxy, VirtualGridProxy,\n  useVariableSizeItemOffsetMapping, useFixedSizeItemOffsetMapping } from '@candidstartup/react-virtual-scroll';\n\nconst Row = ({ index, isScrolling, style }: { index: number, isScrolling?: boolean, style: React.CSSProperties }) => (\n  <div className={ index == 0 ? \"header\" : ( isScrolling ? \"cellScroll\" : \"cell\") } style={style}>\n    { (index == 0) ? \"Header\" : \"Item \" + index }\n  </div>\n);\n\nconst Cell = ({ rowIndex, columnIndex, isScrolling, style }: { rowIndex: number, columnIndex: number, isScrolling?: boolean, style: React.CSSProperties }) => (\n  <div className={ rowIndex == 0 ? \"header\" : ( isScrolling ? \"cellScroll\" : \"cell\") } style={style}>\n    { (rowIndex == 0) ? `${columnIndex}` : `${rowIndex}:${columnIndex}` }\n  </div>\n);\n\nfunction App() {\n  var mapping = useVariableSizeItemOffsetMapping(30, [50]);\n  var columnMapping = useFixedSizeItemOffsetMapping(100);\n  const listProxy = React.createRef<VirtualListProxy>();\n  const gridProxy = React.createRef<VirtualGridProxy>();\n\n  return (\n    <div className=\"app-container\">\n      <label>\n        ScrollToItem: \n        <input\n          type={\"number\"}\n          height={200}\n          onChange={(event) => {\n            const value = parseInt(event.target?.value);\n            listProxy.current?.scrollToItem(value);\n            gridProxy.current?.scrollToItem(value, 0);\n          }}\n        />\n      </label>\n\n      <VirtualList\n        className={\"outerContainer\"}\n        ref={listProxy}\n        height={240}\n        itemCount={100}\n        itemOffsetMapping={mapping}\n        useIsScrolling={true}\n        width={600}>\n        {Row}\n      </VirtualList>\n\n      <VirtualGrid\n        className={\"outerContainer\"}\n        ref={gridProxy}\n        height={240}\n        rowCount={100}\n        rowOffsetMapping={mapping}\n        columnCount={100}\n        columnOffsetMapping={columnMapping}\n        useIsScrolling={true}\n        width={600}>\n        {Cell}\n      </VirtualGrid>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport '../styles.css'\n\n// ReactDOM.createRoot(document.getElementById('root')!).render(\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n// )\n  document.getElementById(\"root\"));\n  "],"names":["VariableSizeItemOffsetMapping","defaultItemSize","sizes","__publicField","itemIndex","offset","length","i","startOffset","size","useVariableSizeItemOffsetMapping","Row","index","isScrolling","style","Cell","rowIndex","columnIndex","jsx","App","mapping","columnMapping","useFixedSizeItemOffsetMapping","listProxy","React","gridProxy","jsxs","event","value","_a","_b","_c","VirtualList","VirtualGrid","ReactDOM"],"mappings":"0UAEA,MAAMA,CAA2D,CAC/D,YAAaC,EAAyBC,EAAiB,CA4CvDC,EAAA,wBACAA,EAAA,cA5CE,KAAK,gBAAkBF,EACvB,KAAK,MAAQC,CACf,CAEA,SAASE,EAA2B,CAC1B,OAAAA,EAAY,KAAK,MAAM,OAAU,KAAK,MAAMA,CAAS,EAAI,KAAK,eACxE,CAEA,WAAWA,EAA2B,CACpC,IAAIC,EAAS,EACT,IAAAC,EAAS,KAAK,MAAM,OACpBF,EAAYE,EAEdD,GADuBD,EAAYE,GACT,KAAK,gBAEtBA,EAAAF,EAGX,QAASG,EAAI,EAAGA,EAAID,EAAQC,IAEhBF,GAAA,KAAK,MAAME,CAAC,EAGjB,OAAAF,CACT,CAEA,aAAaA,EAA0D,CACrE,IAAIG,EAAc,EACZ,MAAAF,EAAS,KAAK,MAAM,OAC1B,QAASC,EAAI,EAAGA,EAAID,EAAQC,IAAM,CAC1B,MAAAE,EAAO,KAAK,MAAMF,CAAC,EACrB,GAAAC,EAAcC,EAAOJ,EAChB,MAAA,CAACE,EAAGC,CAAW,EAETA,GAAAC,CACjB,CAEA,MAAML,EAAY,KAAK,OAAOC,EAASG,GAAe,KAAK,eAAe,EAC1E,OAAAA,GAAeJ,EAAY,KAAK,gBAEzB,CAACA,EAAUE,EAAQE,CAAW,CACvC,CAIF,CAEgB,SAAAE,EAAiCT,EAAyBC,EAAkB,CAC1F,OAAO,IAAIF,EAA8BC,EAAiBC,GAAS,CAAE,CAAA,CACvE,CCjDA,MAAMS,EAAM,CAAC,CAAE,MAAAC,EAAO,YAAAC,EAAa,MAAAC,CAAM,UACtC,MAAI,CAAA,UAAYF,GAAS,EAAI,SAAaC,EAAc,aAAe,OAAU,MAAAC,EAC7E,SAASF,GAAA,EAAK,SAAW,QAAUA,CACxC,CAAA,EAGIG,EAAO,CAAC,CAAE,SAAAC,EAAU,YAAAC,EAAa,YAAAJ,EAAa,MAAAC,CAClD,IAAAI,MAAC,MAAI,CAAA,UAAYF,GAAY,EAAI,SAAaH,EAAc,aAAe,OAAU,MAAAC,EAChF,SAAAE,GAAY,EAAK,GAAGC,CAAW,GAAK,GAAGD,CAAQ,IAAIC,CAAW,EACnE,CAAA,EAGF,SAASE,GAAM,CACb,IAAIC,EAAUV,EAAiC,GAAI,CAAC,EAAE,CAAC,EACnDW,EAAgBC,EAA8B,GAAG,EAC/C,MAAAC,EAAYC,EAAM,YAClBC,EAAYD,EAAM,YAGtB,OAAAE,EAAA,KAAC,MAAI,CAAA,UAAU,gBACb,SAAA,CAAAA,OAAC,QAAM,CAAA,SAAA,CAAA,gBAELR,EAAA,IAAC,QAAA,CACC,KAAM,SACN,OAAQ,IACR,SAAWS,GAAU,WACnB,MAAMC,EAAQ,UAASC,EAAAF,EAAM,SAAN,YAAAE,EAAc,KAAK,GAChCC,EAAAP,EAAA,UAAA,MAAAO,EAAS,aAAaF,IACtBG,EAAAN,EAAA,UAAA,MAAAM,EAAS,aAAaH,EAAO,EACzC,CAAA,CACF,CAAA,EACF,EAEAV,EAAA,IAACc,EAAA,CACC,UAAW,iBACX,IAAKT,EACL,OAAQ,IACR,UAAW,IACX,kBAAmBH,EACnB,eAAgB,GAChB,MAAO,IACN,SAAAT,CAAA,CACH,EAEAO,EAAA,IAACe,EAAA,CACC,UAAW,iBACX,IAAKR,EACL,OAAQ,IACR,SAAU,IACV,iBAAkBL,EAClB,YAAa,IACb,oBAAqBC,EACrB,eAAgB,GAChB,MAAO,IACN,SAAAN,CAAA,CACH,CACF,CAAA,CAAA,CAEJ,CCxDAmB,EAAS,aACNV,EAAM,WAAN,CACC,SAAAN,EAAAA,IAACC,GAAI,CAAA,EACP,EAEA,SAAS,eAAe,MAAM,CAAC"}