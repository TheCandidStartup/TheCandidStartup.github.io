import{r as T,R as j,j as b}from"./vendor-Bnznptw5.js";function ee(n,e,s,r){if(n==0)return[0,0,[]];var[t,o]=e.offsetToItem(r);t=Math.max(0,Math.min(n-1,t));var i=r+s;const I=1,l=1;for(let c=0;c<I&&t>0;c++)t--,o-=e.itemSize(t);const z=t;var g=o;const x=[];for(;g<i&&t<n;){const c=e.itemSize(t);x.push(c),g+=c,t++}for(let c=0;c<l&&t<n;c++){const a=e.itemSize(t);x.push(a),t++}return[z,o,x]}const ae=6e6,de=100;function te(n,e=ae,s=de){let r=0,t=0,o=0;n<e?(r=t=n,o=1):(r=e,t=r/s,o=Math.floor(n/t));function i(c){return c<=0?0:c>=o-1?n-r:Math.round((c-1)*(n-r)/(o-3))}const I={scrollOffset:0,renderOffset:0,page:0,scrollDirection:"forward"},[l,z]=T.useState(I);function g(c,a,f){if(l.scrollOffset==f)return[f,l];let m=Math.max(0,Math.min(f,a-c));const h=l.scrollOffset<=m?"forward":"backward";let d,u,M=f;if(Math.abs(m-l.scrollOffset)<c)d=Math.min(o-1,Math.floor((f+l.renderOffset)/t)),u=i(d),d!=l.page&&(m=f+l.renderOffset-u,M=m);else{if(m<t)d=0;else if(m>=r-t)d=o-1;else{const D=(n-t*2)/(r-t*2);d=Math.min(o-3,Math.floor((m-t)*D/t))+1}u=i(d)}const R={scrollOffset:m,renderOffset:u,page:d,scrollDirection:h};return z(R),[M,R]}function x(c,a){const f=Math.min(n-a,Math.max(c,0)),m=l.scrollOffset+l.renderOffset<=f?"forward":"backward",h=Math.min(o-1,Math.floor(f/t)),d=i(h),u=f-d;return z({scrollOffset:u,renderOffset:d,page:h,scrollDirection:m}),u}return{...l,renderSize:r,onScroll:g,doScrollTo:x}}function H(n){return n.addEventListener!==void 0}function ce(n,e,s=window,r={}){const t=T.useRef(),{capture:o,passive:i,once:I}=r;T.useEffect(()=>{t.current=e},[e]),T.useEffect(()=>{if(!s)return;const l=H(s)?s:s.current;if(!l)return;const z=x=>t.current(x),g={capture:o,passive:i,once:I};return l.addEventListener(n,z,g),()=>{l.removeEventListener(n,z,g)}},[n,s,o,i,I])}if(import.meta.vitest){const{it:n,expect:e}=import.meta.vitest;n("isListener",()=>{e(H(window)).toBe(!0),e(H(document)).toBe(!0),e(H(document.createElement("div"))).toBe(!0),e(H(T.createRef())).toBe(!1)})}function me(n,e,s){const r=T.useRef(),t=T.useRef(n);T.useEffect(()=>{t.current=n},[n]);const o=performance.now();T.useEffect(()=>{function i(){r.current=void 0,e!==null&&(performance.now()-o>=e?t.current():r.current=requestAnimationFrame(i))}return i(),()=>{typeof r.current=="number"&&(cancelAnimationFrame(r.current),r.current=void 0)}},[e,s])}const he=150,Se=500;function fe(n=window){const[e,s]=T.useState(0),r="onscrollend"in window,t=r?Se:he;return ce("scroll",()=>s(o=>o+1),n),ce("scrollend",()=>s(0),r?n:null),me(()=>s(0),e==0?null:t,e),e>0}const we=(n,e,s)=>`${n}:${e}`,xe=j.forwardRef(function(e,s){const{width:r,height:t,rowCount:o,rowOffsetMapping:i,columnCount:I,columnOffsetMapping:l,children:z,className:g,innerClassName:x,itemData:c=void 0,itemKey:a=we,onScroll:f,useIsScrolling:m=!1}=e,h=i.itemOffset(o),d=l.itemOffset(I),u=j.useRef(null),{scrollOffset:M,renderOffset:y,renderSize:R,onScroll:D,doScrollTo:S}=te(h,e.maxCssSize,e.minNumPages),{scrollOffset:$,renderOffset:B,renderSize:G,onScroll:U,doScrollTo:F}=te(d,e.maxCssSize,e.minNumPages),q=fe(u);j.useImperativeHandle(s,()=>({scrollTo(C,L){const v=u.current;v&&v.scrollTo(F(L,v.clientWidth),S(C,v.clientHeight))},scrollToItem(C,L){this.scrollTo(i.itemOffset(C),l.itemOffset(L))}}),[i,l,S,F]);function X(C){const{clientWidth:L,clientHeight:v,scrollWidth:Q,scrollHeight:ue,scrollLeft:se,scrollTop:oe}=C.currentTarget,[ie,Y]=D(v,ue,oe),[le,k]=U(L,Q,se);u.current&&(ie!=oe||le!=se)&&u.current.scrollTo(le,ie),f==null||f(Y.scrollOffset+Y.renderOffset,k.scrollOffset+k.renderOffset,Y,k)}const[W,P,_]=ee(o,i,t,M+y),[w,O,A]=ee(I,l,r,$+B),N=z,V=e.outerComponent||"div",E=e.innerComponent||"div";let p=P-y,K=0,ne=0,Z=0,J=0,re=0;return b.jsx(V,{className:g,onScroll:X,ref:u,style:{position:"relative",height:t,width:r,overflow:"auto",willChange:"transform"},children:b.jsx(E,{className:x,style:{height:R,width:G},children:_.map((C,L)=>(ne=p,p+=C,K=W+L,Z=O-B,b.jsx(T.Fragment,{children:A.map((v,Q)=>(re=Z,Z+=v,J=w+Q,b.jsx(N,{data:c,rowIndex:K,columnIndex:J,isScrolling:m?q:void 0,style:{position:"absolute",top:ne,height:C,left:re,width:v}},a(K,J,c))))},a(K,0,c))))})})}),Oe=(n,e)=>n,Te=j.forwardRef(function(e,s){const{width:r,height:t,itemCount:o,itemOffsetMapping:i,children:I,className:l,innerClassName:z,itemData:g=void 0,itemKey:x=Oe,layout:c="vertical",onScroll:a,useIsScrolling:f=!1}=e,m=i.itemOffset(o),h=j.useRef(null),{scrollOffset:d,renderOffset:u,renderSize:M,onScroll:y,doScrollTo:R}=te(m,e.maxCssSize,e.minNumPages),D=fe(h),S=c==="vertical";j.useImperativeHandle(s,()=>({scrollTo(w){const O=h.current;O&&(S?O.scrollTo(0,R(w,O.clientHeight)):O.scrollTo(R(w,O.clientWidth),0))},scrollToItem(w){this.scrollTo(i.itemOffset(w))}}),[i,S,R]);function $(w){if(S){const{clientHeight:O,scrollHeight:A,scrollTop:N,scrollLeft:V}=w.currentTarget,[E,p]=y(O,A,N);E!=N&&h.current&&h.current.scrollTo(V,E),a==null||a(p.scrollOffset+p.renderOffset,p)}else{const{clientWidth:O,scrollWidth:A,scrollTop:N,scrollLeft:V}=w.currentTarget,[E,p]=y(O,A,V);E!=V&&h.current&&h.current.scrollTo(E,N),a==null||a(p.scrollOffset+p.renderOffset,p)}}const[B,G,U]=ee(o,i,S?t:r,d+u),F=I,q=e.outerComponent||"div",X=e.innerComponent||"div";let W=G-u,P,_;return b.jsx(q,{className:l,onScroll:$,ref:h,style:{position:"relative",height:t,width:r,overflow:"auto",willChange:"transform"},children:b.jsx(X,{className:z,style:{height:S?M:"100%",width:S?"100%":M},children:U.map((w,O)=>(_=W,W+=w,P=B+O,b.jsx(F,{data:g,index:P,isScrolling:f?D:void 0,style:{position:"absolute",top:S?_:void 0,left:S?void 0:_,height:S?w:"100%",width:S?"100%":w}},x(P,g))))})})});class ge{constructor(e){Object.defineProperty(this,"fixedItemSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.fixedItemSize=e}itemSize(e){return this.fixedItemSize}itemOffset(e){return e*this.fixedItemSize}offsetToItem(e){const s=Math.floor(e/this.fixedItemSize),r=s*this.fixedItemSize;return[s,r]}}function pe(n){return new ge(n)}class Ie{constructor(e,s){Object.defineProperty(this,"defaultItemSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sizes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultItemSize=e,this.sizes=s}itemSize(e){return e<this.sizes.length?this.sizes[e]:this.defaultItemSize}itemOffset(e){var s=0;let r=this.sizes.length;e>r?s=(e-r)*this.defaultItemSize:r=e;for(let t=0;t<r;t++)s+=this.sizes[t];return s}offsetToItem(e){var s=0;const r=this.sizes.length;for(let o=0;o<r;o++){const i=this.sizes[o];if(s+i>e)return[o,s];s+=i}const t=Math.floor((e-s)/this.defaultItemSize);return s+=t*this.defaultItemSize,[t+r,s]}}function ve(n,e){return new Ie(n,e||[])}export{Te as V,pe as a,xe as b,ve as u};
//# sourceMappingURL=index-BuXbwoVf.js.map
